---
import type { GetStaticPaths } from "astro";
import Layout from "../../layouts/Layout.astro";
import { entries } from "../../lib/fetchContentful";

export const getStaticPaths = (async () => {
  const tecnologias = entries.items.map((entry) => {
    return {
      titulo: entry.fields.titulo,
      descripcion: entry.fields.descripcion,
      imagen: entry.fields.imagen,
      tecnologiasRelacionadas: entry.fields.tecnologiasRelacionadas,
    };
  });
  return tecnologias.map((tecnologia) => {
    return {
      params: {
        tecnologia: tecnologia.titulo.toLowerCase(),
      },
      props: {
        titulo: tecnologia.titulo,
        descripcion: tecnologia.descripcion,
        imagen: tecnologia.imagen,
        tecnologiasRelacionadas: tecnologia.tecnologiasRelacionadas,
      },
    };
  });
}) satisfies GetStaticPaths;

const { titulo, descripcion, imagen, tecnologiasRelacionadas } = Astro.props;
---

<Layout>
  <div>
    <h1>{titulo}</h1>
    <p>{descripcion}</p>
    <img src={imagen.fields.file.url} alt={titulo} />
    <ul>
      {
        tecnologiasRelacionadas?.map((tecnologia) => (
          <li>
            {" "}
            <a href={tecnologia.fields.titulo} target="_blank">{tecnologia.fields.titulo}</a>
          </li>
        ))
      }
    </ul>
  </div>
</Layout>

<style>
  div {
    padding: 20px;
  }
  h1 {
    font-size: 2rem;
    margin-bottom: 1rem;
  }

  p {
    font-size: 1.2rem;
  }

  img {
    max-width: 400px;
    height: 400px;
    object-fit: cover;
  }

  ul {
    list-style: none;
    padding: 0;
  }
</style>
